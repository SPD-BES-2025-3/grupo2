# **Relatório de Contribuições - Sistema de Cinema Drive-in**

- **Discente:** Joseppe
- **Data:** 22 de julho de 2025

## **Resumo Geral**

Este relatório detalha minha contribuição no desenvolvimento do backend para o sistema de cinema drive-in, focada na implementação de um módulo completo de gerenciamento de clientes. Meu trabalho abrangeu a configuração da infraestrutura com Docker e PostgreSQL, a construção de uma API RESTful com FastAPI para operações de CRUD (Create, Read, Update, Delete), e a estruturação do código em uma arquitetura de camadas (Repository, Service e Controller).

## **Descrição das Atividades Realizadas**

O desenvolvimento foi executado de forma incremental, começando pela base da infraestrutura até a entrega da funcionalidade completa. As principais atividades foram:

1. **Configuração da Infraestrutura e Ambiente:**
    - Estabeleci o ambiente de desenvolvimento utilizando **Docker Compose** para orquestrar os contêineres do banco de dados (PostgreSQL e MongoDB).
    - Defini as dependências do projeto no arquivo `requirements.txt` e criei um arquivo de exemplo (`.env.example`) para as variáveis de ambiente.
    - Implementei a configuração de acesso ao **PostgreSQL** de forma centralizada, utilizando um `ConfigManager`, e configurei a conexão com o banco de dados usando um engine síncrono do SQLAlchemy.

2. **Desenvolvimento do Módulo de Clientes (CRUD):**
    - Construí a funcionalidade de gerenciamento de clientes seguindo uma arquitetura de camadas para garantir a separação de responsabilidades:
        - **Camada de Modelo:** Criei o modelo `Cliente` com **SQLAlchemy** e os schemas de validação e resposta com **Pydantic**, definindo a estrutura de dados do cliente.
        - **Camada de Repositório:** Implementei o `ClienteRepository`, uma classe responsável por abstrair e executar todas as operações de banco de dados (criar, buscar, atualizar e deletar clientes).
        - **Camada de Serviço e Controlador:** Desenvolvi o `ClienteService`, contendo a lógica de negócio (ex: validação de e-mail duplicado), e o `ClienteController`, que expõe os endpoints da API para as operações de CRUD.

3. **Integração e Finalização:**
    - Criei um módulo de utilitários (`validators.py`) com funções para validar e formatar dados como placas de veículos, e-mails e nomes, promovendo a reutilização de código.
    - Refatorei o arquivo principal (`main.py`) para integrar o novo roteador de clientes, inicializar a conexão com o banco de dados, configurar o CORS e adicionar um endpoint de *health check* para monitoramento da aplicação.

## **Próximos Passos**

Com a funcionalidade principal entregue, os próximos passos recomendados são:

- **Implementação de Testes Automatizados:** Desenvolver testes unitários e de integração para validar as regras de negócio no serviço e o comportamento dos endpoints do controlador.
- **Documentação da API:** Revisar e enriquecer a documentação automática gerada pelo FastAPI (Swagger/OpenAPI) com exemplos e descrições detalhadas para facilitar o uso da API.

## **Histórico de Commits**

A seguir, a lista completa de commits realizados por jongas124 (Joseppe), documentando todo o trabalho desenvolvido no projeto, em ordem cronológica reversa:

1. **Commit:** `e0279af` - Merge branch 'develop'
   - **Descrição:** Merge final consolidando todas as funcionalidades desenvolvidas na branch develop para a branch principal do projeto.

2. **Commit:** `ac2b5c2` - Merge branch 'develop' of <https://github.com/SPD-BES-2025-3/grupo2> into develop
   - **Descrição:** Sincronização das alterações remotas da branch develop com a branch local, integrando contribuições de outros membros da equipe.

3. **Commit:** `fd4a5c4` - Atualiza e expande documentação do projeto
   - **Descrição:** Melhoria significativa da estrutura do README com títulos consistentes, adição de cronograma detalhado de desenvolvimento, instruções completas de execução do projeto, pré-requisitos, comandos de inicialização e informações sobre acesso à documentação da API. Facilita o entendimento e uso do sistema para novos desenvolvedores e colaboradores.

4. **Commit:** `705f472` - Consolidate Alembic migrations into base migration
   - **Descrição:** Consolidação das migrações do Alembic em uma única migração base. Removeu migrações anteriores e criou nova migração que cria as tabelas 'clientes', 'filmes' e 'sessoes', incluindo tipo enum PostgreSQL para gêneros de filmes. Simplifica o histórico de migrações e garante definições de schema consistentes em um único arquivo.

5. **Commit:** `54ec320` - Add Alembic migrations and update dependencies
   - **Descrição:** Adição dos arquivos de migração inicial do Alembic para schema do banco de dados, incluindo tabelas para clientes e sessões. Atualização do requirements.txt com versões mais novas do SQLAlchemy e psycopg2-binary. Modificação do env.py do Alembic para incluir novos modelos e atualização do config_manager.py para carregar variáveis de ambiente usando python-dotenv.

6. **Commit:** `9cc75ad` - Remove obsolete Alembic migration scripts
   - **Descrição:** Remoção de múltiplos arquivos de migração obsoletos do diretório versions do Alembic, incluindo scripts para adição de colunas, correção de problemas de datetime e modificação de tabelas de sessão e cliente. Limpeza que reflete refatoração ou consolidação das migrações de banco de dados.

7. **Commit:** `35cc090` - Merge branch 'develop' of <https://github.com/SPD-BES-2025-3/grupo2> into develop
   - **Descrição:** Merge da branch de desenvolvimento remota, sincronizando alterações realizadas por outros membros da equipe.

8. **Commit:** `34f7ada` - Refactor main.py and add validators utility module
   - **Descrição:** Refatoração do main.py para melhorar a estrutura: adição de inicialização do banco de dados, inclusão do roteador de cliente, atualização da configuração CORS e adição de endpoint de health check. Introdução do módulo src/utils/validators.py com funções para validar e formatar placas brasileiras, e-mails e nomes de clientes.

9. **Commit:** `7d2b378` - Add cliente controller and service for CRUD
   - **Descrição:** Introdução de rotas FastAPI e lógica de serviço para gerenciar clientes, incluindo criação, recuperação, atualização e exclusão. Implementação de validação de entrada para e-mail e placa de veículo, e tratamento de casos de erro como e-mails duplicados e recursos não encontrados.

10. **Commit:** `426e151` - Add ClienteRepository with CRUD operations
    - **Descrição:** Introdução da classe ClienteRepository para gerenciar entidades Cliente, incluindo métodos para criar, recuperar, atualizar e excluir clientes. Adição do inicializador do package repositories para organizar a camada de acesso a dados.

11. **Commit:** `5fa15e7` - Add Cliente model and schema
    - **Descrição:** Introdução do modelo SQLAlchemy Cliente e schemas Pydantic correspondentes (base, create, update, response) para suportar manipulação de dados de clientes. Estabelece a base para operações CRUD em entidades de clientes no backend.

12. **Commit:** `a81b2eb` - Add PostgreSQL config support to config module
    - **Descrição:** Introdução de opções de configuração PostgreSQL em ConfigName e ConfigManager, incluindo valores padrão e helper para construir a URL do banco de dados. Atualização do **init__.py para expor objetos relacionados ao banco de dados.

13. **Commit:** `f321964` - Add environment, requirements, and Docker setup
    - **Descrição:** Adição de .env.example para variáveis de ambiente, requirements.txt para dependências Python e docker-compose.yml para orquestrar containers PostgreSQL e MongoDB. Remoção do arquivo incorretamente nomeado requirementss.txt para padronizar o gerenciamento de dependências.

14. **Commit:** `54dc7ed` - Refactor database config and remove unused modules
    - **Descrição:** Refatoração do database.py para usar engine SQLAlchemy síncrono e melhoria no tratamento de sessões. Remoção de dependencies.py, mongo.py e views/**init__.py não utilizados. Atualização dos diagramas PlantUML para limpar comentários e esclarecer relacionamentos.
